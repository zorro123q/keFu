{% extends "base.html" %}

{% block title %}客户管理 - 自动化营销平台{% endblock %}

{% block content %}
<h1>客户管理</h1>
<div>
    <a href="/customers/add">添加客户</a>
</div>

<form method="get" action="/customers">
    <div class="form-group">
        <label>行业：</label>
        <select name="industry">
            <option value="">全部</option>
            {% for ind in industries %}
            <option value="{{ ind }}" {% if ind==selected_industry %}selected{% endif %}>{{ ind }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label>地区：</label>
        <select name="region">
            <option value="">全部</option>
            {% for reg in regions %}
            <option value="{{ reg }}" {% if reg==selected_region %}selected{% endif %}>{{ reg }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label>添加状态：</label>
        <select name="add_status">
            <option value="">全部</option>
            <option value="未添加" {% if selected_status=='未添加' %}selected{% endif %}>未添加</option>
            <option value="已添加" {% if selected_status=='已添加' %}selected{% endif %}>已添加</option>
        </select>
    </div>
    <button type="submit">筛选</button>
</form>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>姓名</th>
            <th>电话</th>
            <th>微信</th>
            <th>QQ</th>
            <th>行业</th>
            <th>地区</th>
            <th>添加状态</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        {% for c in customers %}
        <tr>
            <td>{{ c.id }}</td>
            <td>{{ c.name or '' }}</td>
            <td>{{ c.phone or '' }}</td>
            <td>{{ c.wechat or '' }}</td>
            <td>{{ c.qq or '' }}</td>
            <td>{{ c.industry or '' }}</td>
            <td>{{ c.region or '' }}</td>
            <td>{{ c.add_status or '' }}</td>
            <td class="actions">
                <a href="/customers/edit/{{ c.id }}">编辑</a>
                <form method="post" action="/customers/delete/{{ c.id }}" style="display:inline;" onsubmit="return confirm('确定删除?');">
                    <button type="submit">删除</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}